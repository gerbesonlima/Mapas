<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programação</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <style>
        :root {
            --primary-color: #1976D2; /* Azul Material Design */
            --primary-dark-color: #004BA0;
            --accent-color: #FFC107; /* Amarelo Âmbar */
            --background-color: #f4f6f8;
            --card-background-color: #ffffff;
            --text-color: #333333;
            --text-light-color: #ffffff;
        }

        /* --- Estilos Gerais --- */
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            background-color: var(--background-color);
            color: var(--text-color);
        }
        
        /* --- Container Principal do App --- */
        .app-container {
            width: 100%;
            min-height: 100vh; /* Alterado de height para min-height */
        }

        /* --- Cabeçalho Superior (Toolbar) --- */
        .app-header {
            background-color: var(--primary-color);
            color: var(--text-light-color);
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            position: sticky; /* Fica fixo no topo */
            top: 0;
            z-index: 1000;
        }
        .header-title {
            font-size: 1.2em;
            font-weight: 500;
        }
        .header-icons {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .header-icons svg {
            width: 24px;
            height: 24px;
            fill: var(--text-light-color);
        }

        /* --- Barra de Navegação com Abas --- */
        .app-nav {
            background-color: var(--primary-color);
            overflow-x: auto; /* Permite rolar as abas */
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .app-nav::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }
        .app-nav ul {
            display: flex;
            list-style-type: none;
            margin: 0;
            padding: 0 8px;
            white-space: nowrap; /* Impede que as abas quebrem a linha */
        }
        .app-nav li a {
            display: block;
            padding: 14px 16px;
            text-decoration: none;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            font-size: 0.9em;
            text-transform: uppercase;
            border-bottom: 3px solid transparent;
            transition: color 0.3s;
        }
        .app-nav li a.active {
            color: var(--text-light-color);
            border-bottom: 3px solid var(--accent-color);
        }

        /* --- Conteúdo Principal e Cards --- */
        .main-content {
            padding: 16px;
        }
        .card {
            background-color: var(--card-background-color);
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            margin-bottom: 16px;
            overflow: hidden; /* Garante que o conteúdo não vaze */
        }
        .card-title {
            padding: 16px;
            font-size: 1.25em;
            font-weight: 700;
            border-bottom: 1px solid #eee;
        }
        .card-subtitle {
            padding: 0 16px 16px;
            color: #666;
            margin-top: -10px; /* Ajuste fino */
        }
        .card-link {
            padding: 16px;
            font-size: 1.1em;
            font-weight: 500;
            color: var(--primary-color);
            text-decoration: none;
            display: block;
        }
         .card-content {
            padding: 0 16px 16px;
            line-height: 1.5;
        }
        
        /* --- Tabelas dentro dos Cards --- */
        .table-wrapper {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        th {
            font-weight: 500;
            color: #555;
            font-size: 0.9em;
        }
        td {
            font-size: 1em;
        }
        tbody tr:last-child td {
            border-bottom: none;
        }
        
        /* Substitui <br> por display block para melhor responsividade */
        .cell-multi-line {
            display: block;
        }

        /* --- Botão de Ação Flutuante (FAB) --- */
        .fab {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 56px;
            height: 56px;
            background-color: var(--accent-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            text-decoration: none;
            color: var(--text-color);
            font-size: 28px;
            font-weight: 300;
            transition: transform 0.2s;
        }
        .fab:hover {
            transform: scale(1.05);
        }

    </style>
</head>
<body>

    <div class="app-container">
        <header class="app-header">
            <div class="header-title">Congregação São Paulo</div>
            <div class="header-icons">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg>
            </div>
        </header>

        <nav class="app-nav">
            <ul>
                <li><a href="inicio.html" class="active">Início</a></li>
                <li><a href="relatorio2.html">Entregar Relatorio</a></li>
                
            </ul>
        </nav>

        <main class="main-content">
            <div class="card">
                <h2 class="card-title" id="titulo-semana">Carregando...</h2>
            </div>
             <div class="card">
                <a href="#" class="card-link" id="info-limpeza">Limpeza: Carregando...</a>
            </div>

            <div class="card">
                <a href="index.html" class="card-link" id="saida-dia">Serviço de Campo - Carregando...</a>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Saída</th>
                                <th>Dirigente</th>
                                <th>Horário</th>
                            </tr>
                        </thead>
                        <tbody id="saida-corpo">
                            <tr>
                                <td colspan="3">Carregando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                 <h3 class="card-link">Ajudantes</h3>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Indicador</th>
                                <th>Volante</th>
                                <th>Palco</th>
                                <th>Presidente</th>
                                <th>Leitor</th>
                            </tr>
                        </thead>
                        <tbody id="ajudantes-corpo">
                            <tr>
                                <td id="ajud-indicador">Carregando...</td>
                                <td id="ajud-volante">Carregando...</td>
                                <td id="ajud-palco">Carregando...</td>
                                <td id="ajud-presidente">Carregando...</td>
                                <td id="ajud-leitor">Carregando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

             <div class="card">
                <a href="#" class="card-link">Áudio e Vídeo</a>
                <div class="card-content" id="info-av">
                    Carregando...
                </div>
            </div>
            
            <div class="card">
                <div id="info-anuncios" class="card-content" style="color: #777;">
                    Carregando anúncios...
                </div>
            </div>

        </main>
    </div>

    <a href="#" class="fab">+</a>

<script>
    // 1. Configuração do Firebase (A MESMA dos seus outros arquivos)
    const firebaseConfig = {
        apiKey: "AIzaSyD75RGb3lOiZ0azcSjtP_b9VcZPlHCelJY",
        authDomain: "territorios-3d0bb.firebaseapp.com",
        projectId: "territorios-3d0bb",
        storageBucket: "territorios-3d0bb.firebasestorage.app", 
        messagingSenderId: "712377474662",
        appId: "1:712377474662:web:dfb86ef024b18aa2cb97a7",
        databaseURL: "https://territorios-3d0bb-default-rtdb.firebaseio.com"
    };

    // 2. Inicializar o Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // 3. Funções de carregamento
    document.addEventListener("DOMContentLoaded", () => {
        carregarTituloSemana();
        carregarLimpeza();
        carregarProgramacaoSaida();
        carregarAjudantes();
        carregarAudioVideo();
        carregarAnuncios();
    });

    /**
     * Pega o nome do dia da semana atual em português.
     */
    function getTodayDayName() {
        const days = ["Domingo", "Segunda-Feira", "Terça-Feira", "Quarta-Feira", "Quinta-Feira", "Sexta-Feira", "Sábado"];
        return days[new Date().getDay()];
    }

    /**
     * Carrega a programação de saída de campo do dia atual.
     * ESTA FUNÇÃO JÁ ESTÁ FUNCIONANDO.
     */
    function carregarProgramacaoSaida() {
        const diaDaSemana = getTodayDayName();
        const tituloEl = document.getElementById("saida-dia");
        const corpoEl = document.getElementById("saida-corpo");
        
        tituloEl.textContent = `Serviço de Campo - ${diaDaSemana}`;

        // Busca no Firebase a programação do dia
        database.ref("schedules/field").once("value", snapshot => {
            const programacaoSemanal = snapshot.val() || [];
            const hoje = programacaoSemanal.find(item => item.day === diaDaSemana);

            if (hoje && hoje.location) { // Mostra apenas se houver um local
                corpoEl.innerHTML = `
                    <tr>
                        <td>${hoje.location}</td>
                        <td>${hoje.leader || 'N/D'}</td>
                        <td>${hoje.time || 'N/D'}</td>
                    </tr>
                `;
            } else {
                corpoEl.innerHTML = `<tr><td colspan="3">Sem saída programada para hoje.</td></tr>`;
            }
        }).catch(err => {
            console.error(err);
            corpoEl.innerHTML = `<tr><td colspan="3">Erro ao carregar programação.</td></tr>`;
        });
    }

    // ==========================================================
    // === FUNÇÕES DE PLACEHOLDER (PRECISAM DA SUA AJUDA) ===
    // ==========================================================
    //
    // Para que as funções abaixo funcionem, você precisa me
    // dizer qual o "caminho" (path) para esses dados no seu
    // banco de dados (Realtime Database).
    //
    // ==========================================================

    /**
     * CARREGAR TÍTULO DA SEMANA (Exemplo)
     * Altere o 'caminhoDoFirebase'
     */
    function carregarTituloSemana() {
        const caminhoDoFirebase = "programacao/semanaAtual"; // <-- MUDE ESTE CAMINHO
        
        database.ref(caminhoDoFirebase).once("value", snapshot => {
            if (snapshot.exists()) {
                document.getElementById("titulo-semana").textContent = snapshot.val();
            } else {
                document.getElementById("titulo-semana").textContent = "Programação da Semana";
            }
        });
    }
    
    /**
     * CARREGAR LIMPEZA (Exemplo)
     * Altere o 'caminhoDoFirebase'
     */
    function carregarLimpeza() {
        const caminhoDoFirebase = "programacao/limpeza"; // <-- MUDE ESTE CAMINHO
        
        database.ref(caminhoDoFirebase).once("value", snapshot => {
            if (snapshot.exists()) {
                document.getElementById("info-limpeza").textContent = `Limpeza: ${snapshot.val()}`;
            } else {
                document.getElementById("info-limpeza").textContent = "Limpeza: N/D";
            }
        });
    }
    
    /**
     * CARREGAR AJUDANTES (Exemplo)
     * Altere o 'caminhoDoFirebase'
     */
    function carregarAjudantes() {
        const caminhoDoFirebase = "programacao/ajudantesDaSemana"; // <-- MUDE ESTE CAMINHO
        
        database.ref(caminhoDoFirebase).once("value", snapshot => {
            const data = snapshot.val();
            if (data) {
                // Usamos .innerHTML para poder usar <br>
                document.getElementById("ajud-indicador").innerHTML = (data.indicador || 'N/D').replace(" /", "<br>");
                document.getElementById("ajud-volante").innerHTML = (data.volante || 'N/D').replace(" /", "<br>");
                document.getElementById("ajud-palco").innerHTML = (data.palco || 'N/D').replace(" /", "<br>");
                document.getElementById("ajud-presidente").innerHTML = (data.presidente || 'N/D').replace(" /", "<br>");
                document.getElementById("ajud-leitor").innerHTML = (data.leitor || 'N/D').replace(" /", "<br>");
            } else {
                document.getElementById("ajudantes-corpo").innerHTML = `<tr><td colspan="5">Ajudantes não definidos.</td></tr>`;
            }
        });
    }

    /**
     * CARREGAR ÁUDIO E VÍDEO (Exemplo)
     * Altere o 'caminhoDoFirebase'
     */
    function carregarAudioVideo() {
        const caminhoDoFirebase = "programacao/audioVideo"; // <-- MUDE ESTE CAMINHO
        
        database.ref(caminhoDoFirebase).once("value", snapshot => {
            if (snapshot.exists()) {
                document.getElementById("info-av").textContent = snapshot.val();
            } else {
                document.getElementById("info-av").textContent = "N/D";
            }
        });
    }
    
    /**
     * CARREGAR ANÚNCIOS (Exemplo)
     * Altere o 'caminhoDoFirebase'
     */
    function carregarAnuncios() {
        const caminhoDoFirebase = "programacao/anuncios"; // <-- MUDE ESTE CAMINHO
        
        database.ref(caminhoDoFirebase).once("value", snapshot => {
            if (snapshot.exists()) {
                // Usamos innerHTML para o caso de o anúncio ter quebras de linha (<br>)
                document.getElementById("info-anuncios").innerHTML = snapshot.val();
            } else {
                document.getElementById("info-anuncios").textContent = "Sem anúncios para esta semana.";
            }
        });
    }

</script>

</body>
</html>